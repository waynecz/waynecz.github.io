<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>ä»0å¼€å§‹åšä¸€ä¸ªçš„Vueå›¾ç‰‡é€‰æ‹©(ä¸Šä¼ )ç»„ä»¶[åŸºç¡€å‘] - Wayne</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="ä¹‹å‰ç”¨Vueåšäº†ä¸€ä¸ªåŸºç¡€çš„ç»„ä»¶vue-img-inputerï¼Œä¸‹é¢å°±å«viiï¼Œè®°å½•ä¸‹åœ¨å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„çŸ¥è¯†ç‚¹ï¼ˆéƒ½ç®—æ¯”è¾ƒåŸºç¡€ï¼Œå…·ä½“ä»£ç ä¸ä¼šè´´å¤ªå¤šï¼Œéƒ½å¯ä»¥åœ¨é¡¹ç›®ä»“åº“é‡Œçœ‹åˆ°ï¼‰ã€‚
ä¸Šä¼ æ–‡ä»¶å¾ˆå¤šé¡¹ç›®éƒ½è¦ç”¨åˆ°ï¼Œä¸€äº›ç»„ä»¶åº“é‡Œ(ele/iviewâ€¦)æ–‡ä»¶ä¸Šä¼ ç»„ä»¶éƒ½æ˜¯åšæˆäº†æ ‡é…ï¼Œè™½ç„¶viiå’Œuploaderå®šä½è¿˜æ˜¯æœ‰äº›å·®åˆ«ï¼Œä½†å®ç°ä¸Šéƒ½æœ‰å‡ ä¸ªå…±åŒè¦ç‚¹ï¼š">
<meta property="og:type" content="article">
<meta property="og:title" content="ä»0å¼€å§‹åšä¸€ä¸ªçš„Vueå›¾ç‰‡é€‰æ‹©(ä¸Šä¼ )ç»„ä»¶[åŸºç¡€å‘]">
<meta property="og:url" content="http://waynecz.github.io/2017/02/27/ä»0å¼€å§‹åšä¸€ä¸ªçš„Vueå›¾ç‰‡-æ–‡ä»¶é€‰æ‹©-ä¸Šä¼ -ç»„ä»¶-åŸºç¡€å‘/index.html">
<meta property="og:site_name" content="Wayne">
<meta property="og:description" content="ä¹‹å‰ç”¨Vueåšäº†ä¸€ä¸ªåŸºç¡€çš„ç»„ä»¶vue-img-inputerï¼Œä¸‹é¢å°±å«viiï¼Œè®°å½•ä¸‹åœ¨å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„çŸ¥è¯†ç‚¹ï¼ˆéƒ½ç®—æ¯”è¾ƒåŸºç¡€ï¼Œå…·ä½“ä»£ç ä¸ä¼šè´´å¤ªå¤šï¼Œéƒ½å¯ä»¥åœ¨é¡¹ç›®ä»“åº“é‡Œçœ‹åˆ°ï¼‰ã€‚
ä¸Šä¼ æ–‡ä»¶å¾ˆå¤šé¡¹ç›®éƒ½è¦ç”¨åˆ°ï¼Œä¸€äº›ç»„ä»¶åº“é‡Œ(ele/iviewâ€¦)æ–‡ä»¶ä¸Šä¼ ç»„ä»¶éƒ½æ˜¯åšæˆäº†æ ‡é…ï¼Œè™½ç„¶viiå’Œuploaderå®šä½è¿˜æ˜¯æœ‰äº›å·®åˆ«ï¼Œä½†å®ç°ä¸Šéƒ½æœ‰å‡ ä¸ªå…±åŒè¦ç‚¹ï¼š">
<meta property="og:image" content="https://segmentfault.com/img/bVJQgt?w=1318&h=966">
<meta property="og:image" content="https://segmentfault.com/img/bVJOJb?w=572&h=82">
<meta property="og:image" content="https://segmentfault.com/img/bVJOSY?w=734&h=218">
<meta property="og:image" content="https://segmentfault.com/img/bVJOTH?w=598&h=256">
<meta property="og:image" content="https://segmentfault.com/img/bVJP3q?w=1184&h=348">
<meta property="og:updated_time" content="2017-02-28T02:56:23.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ä»0å¼€å§‹åšä¸€ä¸ªçš„Vueå›¾ç‰‡é€‰æ‹©(ä¸Šä¼ )ç»„ä»¶[åŸºç¡€å‘]">
<meta name="twitter:description" content="ä¹‹å‰ç”¨Vueåšäº†ä¸€ä¸ªåŸºç¡€çš„ç»„ä»¶vue-img-inputerï¼Œä¸‹é¢å°±å«viiï¼Œè®°å½•ä¸‹åœ¨å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„çŸ¥è¯†ç‚¹ï¼ˆéƒ½ç®—æ¯”è¾ƒåŸºç¡€ï¼Œå…·ä½“ä»£ç ä¸ä¼šè´´å¤ªå¤šï¼Œéƒ½å¯ä»¥åœ¨é¡¹ç›®ä»“åº“é‡Œçœ‹åˆ°ï¼‰ã€‚
ä¸Šä¼ æ–‡ä»¶å¾ˆå¤šé¡¹ç›®éƒ½è¦ç”¨åˆ°ï¼Œä¸€äº›ç»„ä»¶åº“é‡Œ(ele/iviewâ€¦)æ–‡ä»¶ä¸Šä¼ ç»„ä»¶éƒ½æ˜¯åšæˆäº†æ ‡é…ï¼Œè™½ç„¶viiå’Œuploaderå®šä½è¿˜æ˜¯æœ‰äº›å·®åˆ«ï¼Œä½†å®ç°ä¸Šéƒ½æœ‰å‡ ä¸ªå…±åŒè¦ç‚¹ï¼š">
<meta name="twitter:image" content="https://segmentfault.com/img/bVJQgt?w=1318&h=966">
  
  
    <link rel="icon" href="/favicon.ico">
  
  <link href="/webfonts/ptserif/main.css" rel='stylesheet' type='text/css'>
  <link href="/webfonts/source-code-pro/main.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css">
  
<script type="text/javascript">
var _hmt = _hmt || [];
(function() {
var hm = document.createElement("script");
hm.src = "//hm.baidu.com/hm.js?a263c908beac42a00a8426f995864225";
var s = document.getElementsByTagName("script")[0];
s.parentNode.insertBefore(hm, s);
})();
</script>

</head>

<body>
<!-- <div class="load-wrap">
  <div id="load">
    <div>G</div>
    <div>N</div>
    <div>I</div>
    <div>D</div>
    <div>A</div>
    <div>O</div>
    <div>L</div>
  </div>
</div> -->
<div class="load-wrap">
<img src="http://7xntdk.com1.z0.glb.clouddn.com/loading.gif"/>
</div>
<img id="shadow" src="css/images/wayne.png" alt="" style="display: none">
<div class="welcome">
  <div id="word" class="wordWrap">
    <span class="word word1" data-ratio="-.2"></span>
    <span class="word word2" data-ratio=".6"></span>
    <span class="word word3" data-ratio="-0.1"></span>
    <span class="word word4" data-ratio="-.6"></span>
    <span class="word word5" data-ratio="-.3"></span>
  </div>
</div>
  <div id="container">

    

<header id="header">
  <div id="header-outer" class="outer">
    <div id="header-inner" class="inner">
      <a id="main-nav-toggle" class="nav-icon" href="javascript:;"></a>
      <a id="logo" class="logo" href="/"></a>
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/">é¦–é¡µ</a>
        
          <a class="main-nav-link" href="/archives">æ—¥æœŸ</a>
        
          <a class="main-nav-link" href="/tags">æ ‡ç­¾</a>
        
          <a class="main-nav-link" href="/categories">åˆ†ç±»</a>
        
      </nav>
    </div>
  </div>
</header>
    <section id="main" class="outer"><article id="post-ä»0å¼€å§‹åšä¸€ä¸ªçš„Vueå›¾ç‰‡-æ–‡ä»¶é€‰æ‹©-ä¸Šä¼ -ç»„ä»¶-åŸºç¡€å‘" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      ä»0å¼€å§‹åšä¸€ä¸ªçš„Vueå›¾ç‰‡é€‰æ‹©(ä¸Šä¼ )ç»„ä»¶[åŸºç¡€å‘]
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2017/02/27/ä»0å¼€å§‹åšä¸€ä¸ªçš„Vueå›¾ç‰‡-æ–‡ä»¶é€‰æ‹©-ä¸Šä¼ -ç»„ä»¶-åŸºç¡€å‘/" class="article-date">
  <time datetime="2017-02-27T04:51:11.000Z" itemprop="datePublished">2017-02-27</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/å‰ç«¯/">å‰ç«¯</a>
  </div>

      
        <div class="article-comment-link-wrap">
          <a href="http://waynecz.github.io/2017/02/27/ä»0å¼€å§‹åšä¸€ä¸ªçš„Vueå›¾ç‰‡-æ–‡ä»¶é€‰æ‹©-ä¸Šä¼ -ç»„ä»¶-åŸºç¡€å‘/#disqus_thread" class="article-comment-link">è¯„è®º</a>
        </div>
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="https://segmentfault.com/img/bVJQgt?w=1318&amp;h=966" alt="clipboard.png"></p>
<p>ä¹‹å‰ç”¨Vueåšäº†ä¸€ä¸ªåŸºç¡€çš„ç»„ä»¶<a href="https://github.com/waynecz/vue-img-inputer" target="_blank" rel="external">vue-img-inputer</a>ï¼Œä¸‹é¢å°±å«<code>vii</code>ï¼Œè®°å½•ä¸‹åœ¨å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„<strong><em>çŸ¥è¯†ç‚¹</em></strong>ï¼ˆéƒ½ç®—æ¯”è¾ƒåŸºç¡€ï¼Œå…·ä½“ä»£ç ä¸ä¼šè´´å¤ªå¤šï¼Œéƒ½å¯ä»¥åœ¨<a href="https://github.com/waynecz/vue-img-inputer" target="_blank" rel="external">é¡¹ç›®</a>ä»“åº“é‡Œçœ‹åˆ°ï¼‰ã€‚</p>
<p>ä¸Šä¼ æ–‡ä»¶å¾ˆå¤šé¡¹ç›®éƒ½è¦ç”¨åˆ°ï¼Œä¸€äº›ç»„ä»¶åº“é‡Œ(ele/iviewâ€¦)<code>æ–‡ä»¶ä¸Šä¼ ç»„ä»¶</code>éƒ½æ˜¯åšæˆäº†æ ‡é…ï¼Œè™½ç„¶<code>vii</code>å’Œ<code>uploader</code><a href="https://segmentfault.com/a/1190000008439300" target="_blank" rel="external">å®šä½è¿˜æ˜¯æœ‰äº›å·®åˆ«</a>ï¼Œä½†å®ç°ä¸Šéƒ½æœ‰å‡ ä¸ªå…±åŒè¦ç‚¹ï¼š<br><a id="more"></a></p>
<blockquote>
<ol>
<li>æ ·å­è¦å¥½çœ‹ç‚¹</li>
<li>å›¾ç‰‡/æ–‡ä»¶é€‰æ‹©åé¢„è§ˆ</li>
<li>å®ç°æ‹–æ‹½é€‰æ‹©æ–‡ä»¶</li>
<li>å›¾ç‰‡é€‰æ‹©åæ‰§è¡ŒæŸäº›åŠ¨ä½œï¼ˆè­¬å¦‚uploaderçš„ä¸Šä¼ ç­‰ï¼‰</li>
</ol>
</blockquote>
<h2 id="å…ˆä¸Šdemo"><a href="#å…ˆä¸Šdemo" class="headerlink" title="å…ˆä¸Šdemo"></a>å…ˆä¸Š<a href="http://waynecz.github.io/VueImgInputer/index.html">demo</a></h2><p>æ³¨ï¼š ä¸‹é¢æœ‰äº›åœ°æ–¹ä¼šæœ‰äº›å•°å—¦ï¼Œè¯·é€‰æ‹©è§‚çœ‹</p>
<h2 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h2><p>é¦–å…ˆæˆ‘ä»¬æœ‰ä¸ªæ–‡ä»¶é€‰æ‹©æ¡†ï¼Œæ©ï¼Œé•¿è¿™æ ·ï¼š</p>
<p><img src="https://segmentfault.com/img/bVJOJb?w=572&amp;h=82" alt="clipboard.png"></p>
<p>å¥½ä¸‘å•Šï¼ï¼æˆ‘ä»¬æ¥è®©å®ƒå˜å¥½çœ‹ç‚¹ï¼š</p>
<h3 id="ç¬¬ä¸€ä¸ªæ–¹æ³•ï¼šä¿®æ”¹è‡ªèº«CSS"><a href="#ç¬¬ä¸€ä¸ªæ–¹æ³•ï¼šä¿®æ”¹è‡ªèº«CSS" class="headerlink" title="ç¬¬ä¸€ä¸ªæ–¹æ³•ï¼šä¿®æ”¹è‡ªèº«CSS"></a>ç¬¬ä¸€ä¸ªæ–¹æ³•ï¼šä¿®æ”¹è‡ªèº«CSS</h3><p>è¿™é‡Œæœ‰ä¸€ä¸ª<a href="https://www.toobug.net/article/what_is_shadow_dom.html" target="_blank" rel="external">shadowDOM</a>çš„æ¦‚å¿µï¼Œç®€å•çš„æ¥è¯´å°±æ˜¯æˆ‘ä»¬ç»å¸¸ç”¨åˆ°çš„ä¸€äº›HTMLæ ‡å‡†ç»„ä»¶ï¼ˆä¾‹å¦‚<code>viedo</code>ï¼Œç”šè‡³<code>æ»šåŠ¨æ¡</code>ï¼‰å…¶å®æ˜¯ç”±è‹¥å¹²ä¸ªæ›´åŸºç¡€çš„DOMç”±æµè§ˆå™¨å°è£…æˆçš„ï¼Œä½¿å¾—æˆ‘ä»¬è°ƒç”¨åªè¦ä¸€ä¸ªæ ‡ç­¾å°±å¤Ÿäº†ï¼Œè¿™ç±»ä¹Ÿå°±æ˜¯<code>WebComponent</code>ï¼Œè¿™é‡Œå…·ä½“ä¸å±•å¼€äº†ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹file-inputçš„å†…éƒ¨æ˜¯å¦‚ä½•çš„ï¼ˆchrome devtoolä¸<a href="http://www.cnblogs.com/liyunhua/p/4544738.html#_label13" target="_blank" rel="external">è®¾ç½®</a>æ˜¯çœ‹ä¸åˆ°çš„ï¼‰ï¼š</p>
<p><img src="https://segmentfault.com/img/bVJOSY?w=734&amp;h=218" alt="clipboard.png"></p>
<p>æ‰€ä»¥å‘¢ï¼Œç›´æ¥ç»™file-inputä¿®æ”¹æ ·å¼è¿™ä¸ªæŒ‰é’®ä¼šä¸€ç›´å­˜åœ¨çš„ï¼æˆ‘ä»¬è¦ä¹ˆæŠŠæŒ‰é’®ç§»å‡ºè§†çº¿ï¼Œè¦ä¹ˆå°±ç”¨è¿™ä¸ªæŒ‰é’®ä¿®æ”¹å…¶æ ·å¼ã€‚è¿™é‡Œå°±ä¿®æ”¹ä¸‹é‡Œé¢è¿™ä¸ªtype=buttonçš„æ ·å¼ï¼Œåªæä¾›ä¸ªæ€è·¯ï¼Œä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></div><div class="line">    <span class="selector-tag">input</span> &#123;</div><div class="line">        <span class="attribute">font-size</span>: <span class="number">0</span>; <span class="comment">/* ä¸ºäº†å»æ‰â€˜æœªé€‰æ‹©ä»»ä½•æ–‡ä»¶â€™è¿™å‡ ä¸ªå­—ï¼Œä¹Ÿå¯ä»¥éšä¾¿å¼„åˆ°å“ªé‡Œ*/</span></div><div class="line">    &#125;</div><div class="line">    <span class="comment">/* æ³¨æ„ä¸æ˜¯ç›´æ¥input &gt; input[type=button] å“¦*/</span></div><div class="line">    <span class="selector-tag">input</span><span class="selector-pseudo">::-webkit-file-upload-button</span> &#123;</div><div class="line">        <span class="attribute">background</span>: <span class="number">#efeeee</span>;</div><div class="line">        <span class="attribute">color</span>: <span class="number">#333</span>;</div><div class="line">        <span class="attribute">border</span>: <span class="number">0</span>;</div><div class="line">        <span class="attribute">padding</span>: <span class="number">40px</span> <span class="number">100px</span>;</div><div class="line">        <span class="attribute">border-radius</span>: <span class="number">5px</span>;</div><div class="line">        <span class="attribute">font-size</span>: <span class="number">12px</span>;</div><div class="line">        <span class="attribute">box-shadow</span>: <span class="number">1px</span> <span class="number">1px</span> <span class="number">5px</span> <span class="built_in">rgba</span>(0,0,0,.1), <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> <span class="built_in">rgba</span>(0,0,0,.12);</div><div class="line">    &#125;</div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure>
<p>æœ‰æ²¡æœ‰æƒ³åˆ°chromeä¿®æ”¹æ»šåŠ¨æ¡æ ·å¼å‘¢ï¼Ÿå“ˆå“ˆï¼Œå…¶å®æ˜¯ä¸€ä¸ªé“ç†ï¼Œç°åœ¨file-inputå˜è¿™æ ·äº†ï¼š</p>
<p><img src="https://segmentfault.com/img/bVJOTH?w=598&amp;h=256" alt="clipboard.png"></p>
<p>å¥½åƒæŒºç®€å•ï¼ç„¶è€Œæˆ‘ä»¬çœ‹åˆ°<code>-webkit-</code>å°±åº”è¯¥çŸ¥é“å…¼å®¹æ€§äº†ï¼Œè¿™ç§æ–¹æ³•åªæœ‰safariå’Œchromeç¬‘ç¬‘ï¼Œå…¶ä»–GGï¼Œæ‰€ä»¥è‡ªç„¶ä¸èƒ½è¿™ä¹ˆå¹²ã€‚</p>
<h3 id="ç¬¬äºŒä¸ªæ–¹æ³•ï¼šç»™file-inputæ‰¾ä¸ªæ›¿èº«"><a href="#ç¬¬äºŒä¸ªæ–¹æ³•ï¼šç»™file-inputæ‰¾ä¸ªæ›¿èº«" class="headerlink" title="ç¬¬äºŒä¸ªæ–¹æ³•ï¼šç»™file-inputæ‰¾ä¸ªæ›¿èº«"></a>ç¬¬äºŒä¸ªæ–¹æ³•ï¼šç»™file-inputæ‰¾ä¸ªæ›¿èº«</h3><p>æ˜¯è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥å¯ä»¥æŠŠfile-inputæ•´ä¸ªç§»å‡ºè§†çº¿ï¼Œå†æ‰¾ä¸ªæ‰¾å‡ ä¸ªå…ƒç´ ï¼Œé€šè¿‡ç‚¹å‡»è¿™äº›ä¸ªå…ƒç´ æ¥ä»£ç†åŸfile-inputçš„ç‚¹å‡»ï¼Œå‘¼å‡ºæ–‡ä»¶é€‰æ‹©æ¡†å‘¢ï¼Ÿ</p>
<p>è‡ªç„¶æ˜¯å¯ä»¥çš„ï¼Œ<code>label</code>æ ‡æ³¨æ ‡ç­¾, ç»™labelä¸€ä¸ª<code>for</code>å±æ€§æŒ‡å‘inputçš„å”¯ä¸€<code>id</code>ï¼Œè¿™æ ·ç‚¹å‡»labelå°±ç›¸å½“äºç‚¹å‡»input, æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå†™ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"id"</span> <span class="attr">type</span>=<span class="string">"file"</span> /&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">  <span class="comment">&lt;!-- other element--&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.box</span> &#123;</div><div class="line">    <span class="attribute">position</span>: relative;</div><div class="line">&#125;</div><div class="line"><span class="selector-tag">input</span> &#123;</div><div class="line">    <span class="attribute">position</span>: absolute;</div><div class="line">    <span class="attribute">left</span>: -<span class="number">9999px</span>;</div><div class="line">&#125;    </div><div class="line"><span class="comment">/* ä½¿labelå……æ»¡æ•´ä¸ªbox*/</span></div><div class="line"><span class="selector-tag">label</span> &#123;</div><div class="line">    <span class="attribute">position</span>: absolute;</div><div class="line">    <span class="attribute">top</span>: <span class="number">0</span>;<span class="attribute">left</span>: <span class="number">0</span>;<span class="attribute">right</span>: <span class="number">0</span>;<span class="attribute">bottom</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">z-index</span>: <span class="number">10</span>; <span class="comment">/* è¿™ä¸ªz-indexä¹‹åè¯´åˆ°*/</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ ·å­åšä¹‹åï¼Œå°±æœ‰ä¸€ä¸ªç»„ä»¶çš„å½±å­äº†ï¼Œå…¶ä¸­</p>
<ul>
<li>å› ä¸º<code>label</code>å……æ»¡äº†æ•´ä¸ªboxï¼Œæ‰€ä»¥ç‚¹å‡»boxå°±å¯ä»¥é€‰æ‹©æ–‡ä»¶</li>
<li>åŒæ—¶æœ‰äº†boxï¼Œå¯ä»¥å¾€é‡Œé¢å¡«å……ä»»ä½•å…ƒç´ ï¼Œè­¬å¦‚ä¸€ä¸ªicon<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"id"</span> <span class="attr">type</span>=<span class="string">"file"</span> /&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"iconfont"</span>&gt;</span>:)<span class="tag">&lt;/<span class="name">i</span>&gt;</span></div><div class="line">  <span class="comment">&lt;!--  ...å‘æŒ¥ä½ çš„æƒ³è±¡åŠ›--&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>å¥½äº†ï¼ŒåŸºç¡€åŸºæœ¬ä¸Šå•°å—¦å®Œäº†ï¼Œæ­£å¼è¿›å…¥vueçš„å®ç°(Vue 2.x)ï¼š</p>
<h2 id="æ–‡ä»¶é€‰æ‹©çš„å¤„ç†"><a href="#æ–‡ä»¶é€‰æ‹©çš„å¤„ç†" class="headerlink" title="æ–‡ä»¶é€‰æ‹©çš„å¤„ç†"></a>æ–‡ä»¶é€‰æ‹©çš„å¤„ç†</h2><p>è¿™å—è®²<code>æ–‡ä»¶æ•°æ®</code>çš„è·å–å’Œå¤„ç†:</p>
<h3 id="v-model"><a href="#v-model" class="headerlink" title="v-model"></a>v-model</h3><p>å¦‚æœé—®ä½ vueé‡Œä½ æƒ³è¦ç»„ä»¶ç»‘å®šä¸€ä¸ªè¾“å…¥å€¼çš„æœ€ç²—æš´çš„æ–¹å¼æ˜¯ä»€ä¹ˆï¼Ÿ<code>v-model</code>å•Šï¼ä½†æ˜¯è¿™æ¡æŒ‡ä»¤å…¶å®æ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">imgInputer</span> <span class="attr">v-model</span>=<span class="string">"target"</span>&gt;</span><span class="tag">&lt;/<span class="name">imgInputer</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- é»˜è®¤ç­‰åŒäºä¸‹é¢å‡ è¡Œ--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">imgInputer</span> <span class="attr">ref</span>=<span class="string">"x"</span> <span class="attr">:value</span>=<span class="string">"target"</span>&gt;</span><span class="tag">&lt;/<span class="name">imgInputer</span>&gt;</span>  </div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="actionscript"></span></div><div class="line">    ...</div><div class="line">    <span class="comment">// é»˜è®¤ç»™è¿™ä¸ªç»„ä»¶å¯¹è±¡ç»‘å®šinputäº‹ä»¶ï¼</span></div><div class="line">    <span class="keyword">this</span>.$refs.x.$on(<span class="string">'input'</span>, value =&gt; &#123;<span class="keyword">this</span>.target = value&#125;)</div><div class="line">    ...</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="æ‰€ä»¥æ–‡ä»¶é€‰æ‹©ä¼ å€¼çš„å®ç°æ–¹å¼ï¼š"><a href="#æ‰€ä»¥æ–‡ä»¶é€‰æ‹©ä¼ å€¼çš„å®ç°æ–¹å¼ï¼š" class="headerlink" title="æ‰€ä»¥æ–‡ä»¶é€‰æ‹©ä¼ å€¼çš„å®ç°æ–¹å¼ï¼š"></a>æ‰€ä»¥æ–‡ä»¶é€‰æ‹©ä¼ å€¼çš„å®ç°æ–¹å¼ï¼š</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">input</span> @<span class="attr">change</span>=<span class="string">"handleFileChange"</span> <span class="attr">ref</span>=<span class="string">"inputer"</span> <span class="attr">...</span>/&gt;</span></div><div class="line">      ...</div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    ...</div><div class="line">    props: &#123;</div><div class="line">        <span class="attr">value</span>: &#123;</div><div class="line">            <span class="comment">// ç»‘å®šé»˜è®¤çš„value prop</span></div><div class="line">            <span class="keyword">default</span>: <span class="literal">undefined</span></div><div class="line">        &#125;,</div><div class="line">    &#125;,</div><div class="line">    ...</div><div class="line">    <span class="comment">// inputçš„changeå›è°ƒç¬¬ä¸€ä¸ªå‚æ•°æ˜¯eventå¯¹è±¡</span></div><div class="line">    methods: &#123;</div><div class="line">        handleFileChange (e) &#123;</div><div class="line">            <span class="keyword">let</span> inputDOM = <span class="keyword">this</span>.$refs.inputer;</div><div class="line">            <span class="comment">// é€šè¿‡DOMå–æ–‡ä»¶æ•°æ®</span></div><div class="line">            <span class="keyword">this</span>.file    = inputDOM.files[<span class="number">0</span>];</div><div class="line">            <span class="keyword">this</span>.errText = <span class="string">''</span>;</div><div class="line">    </div><div class="line">            <span class="keyword">let</span> size = <span class="built_in">Math</span>.floor(<span class="keyword">this</span>.file.size / <span class="number">1024</span>);</div><div class="line">            <span class="keyword">if</span> (size &gt; ...) &#123;</div><div class="line">                <span class="comment">// è¿™é‡Œå¯ä»¥åŠ ä¸ªæ–‡ä»¶å¤§å°æ§åˆ¶</span></div><div class="line">                <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">            &#125;</div><div class="line">    </div><div class="line">            <span class="comment">// è§¦å‘è¿™ä¸ªç»„ä»¶å¯¹è±¡çš„inputäº‹ä»¶</span></div><div class="line">            <span class="keyword">this</span>.$emit(<span class="string">'input'</span>, <span class="keyword">this</span>.file);</div><div class="line">            </div><div class="line">            <span class="comment">// è¿™é‡Œå°±å¯ä»¥è·å–åˆ°æ–‡ä»¶çš„åå­—äº†</span></div><div class="line">            <span class="keyword">this</span>.fileName = <span class="keyword">this</span>.file.name;</div><div class="line">            </div><div class="line">            <span class="comment">// è¿™é‡ŒåŠ ä¸ªå›è°ƒä¹Ÿæ˜¯å¯ä»¥çš„</span></div><div class="line">            <span class="keyword">this</span>.onChange &amp;&amp; <span class="keyword">this</span>.onChange(<span class="keyword">this</span>.file, inputDOM.value);</div><div class="line">      </div><div class="line">        &#125;,</div><div class="line">    &#125;</div><div class="line">    ...</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- è°ƒç”¨--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">imgInputer</span> <span class="attr">v-model</span>=<span class="string">"target"</span>&gt;</span><span class="tag">&lt;/<span class="name">imgInputer</span>&gt;</span></div></pre></td></tr></table></figure>
<p>è¿™æ ·é€‰ä¸­çš„æ–‡ä»¶å°±ä¼šä¼ ç»™targetäº†ï¼Œæ¥ç€è¯´å›¾ç‰‡é¢„è§ˆ</p>
<h2 id="å›¾ç‰‡é¢„è§ˆ"><a href="#å›¾ç‰‡é¢„è§ˆ" class="headerlink" title="å›¾ç‰‡é¢„è§ˆ"></a>å›¾ç‰‡é¢„è§ˆ</h2><p>æ€è·¯æœ‰ä¸¤ç§ï¼š</p>
<ol>
<li>é€‰æ‹©æ–‡ä»¶åç›´ä¸Šä¼ ç„¶åå¾—åˆ°ç½‘ç»œurl</li>
<li>ç”¨HTML5çš„<code>File API</code>çš„<code>FileReader</code>å›¾ç‰‡æœ¬åœ°è½¬æˆbase64æ ¼å¼çš„url</li>
</ol>
<p>ç„¶åå°†urlèµ‹å€¼ç»™ä¸€ä¸ªimgæ ‡ç­¾</p>
<p>æˆ‘ä»¬è¿™é‡Œè‚¯å®šé€‰æ‹©ç¬¬äºŒç§ï¼Œæ‰€ä»¥å…ˆä»‹ç»ä¸‹ï¼š</p>
<h3 id="FileReader"><a href="#FileReader" class="headerlink" title="FileReader"></a>FileReader</h3><p>ç…§ä¾‹è´´<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader" target="_blank" rel="external">MDNæ–‡æ¡£å…ˆ</a>ï¼Œç„¶åæ˜¯ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">"box"</span>&gt;</span></div><div class="line">      ...</div><div class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">...</span> /&gt;</span></div><div class="line">      // ç»™ä¸ªimgæ¥æ‰¿æ‹…é¢„è§ˆå·¥ä½œå°±è¡Œäº†</div><div class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">"dataUrl"</span> /&gt;</span></div><div class="line">      ...</div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">sctipt</span>&gt;</span></div><div class="line">    data () &#123;</div><div class="line">        return &#123;</div><div class="line">            // è½¬base64ç åçš„dataå­—æ®µ</div><div class="line">            dataUrl: ''</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    methods: &#123;,</div><div class="line">        imgPreview (file) &#123;</div><div class="line">            let self = this;</div><div class="line">            // çœ‹æ”¯æŒä¸æ”¯æŒFileReader</div><div class="line">            if (!file || !window.FileReader) return;</div><div class="line">    </div><div class="line">            if (/^image/.test(file.type)) &#123;</div><div class="line">                // åˆ›å»ºä¸€ä¸ªreader</div><div class="line">                var reader = new FileReader();</div><div class="line">                // å°†å›¾ç‰‡å°†è½¬æˆ base64 æ ¼å¼</div><div class="line">                reader.readAsDataURL(file);</div><div class="line">                // è¯»å–æˆåŠŸåçš„å›è°ƒ</div><div class="line">                reader.onloadend = function () &#123;</div><div class="line">                    self.dataUrl = this.result;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line">        handleFileChange (e) &#123;</div><div class="line">            ...</div><div class="line">            this.file = inputDOM.files[0];</div><div class="line">            ...</div><div class="line">            // åœ¨è·å–åˆ°æ–‡ä»¶å¯¹è±¡è¿›è¡Œé¢„è§ˆå°±è¡Œäº†ï¼</div><div class="line">            this.imgPreview(this.file);</div><div class="line">            ...</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>å½“ç„¶äº†ï¼Œè¿™ä¸œè¥¿çš„å…¼å®¹æ€§æœ‰ç‚¹æ‰é¸¡: IE10+, ç§»åŠ¨ç«¯å¯ä»¥å¿«ä¹çš„ä½¿ç”¨ã€‚</p>
<p><img src="https://segmentfault.com/img/bVJP3q?w=1184&amp;h=348" alt="clipboard.png"></p>
<p>é¢„è§ˆå°±è¿™ä¹ˆå®Œæˆäº†ï¼Œä¸‹ä¸€ä¸ªæˆ‘ä»¬æ¥è¯´æ‹–æ‹½ï¼</p>
<h2 id="æ‹–æ‹½é€‰æ‹©"><a href="#æ‹–æ‹½é€‰æ‹©" class="headerlink" title="æ‹–æ‹½é€‰æ‹©"></a>æ‹–æ‹½é€‰æ‹©</h2><p>æ‹–æ‹½è¯´ç™½äº†å°±æ˜¯ä¸€ä¸ªäº‹ä»¶ç›‘å¬ï¼Œdropäº‹ä»¶ï¼Œæˆ‘ä»¬ä»å¤´å¼€å§‹è¯´èµ·</p>
<h3 id="æµè§ˆå™¨æ‹–æ‹½äº‹ä»¶"><a href="#æµè§ˆå™¨æ‹–æ‹½äº‹ä»¶" class="headerlink" title="æµè§ˆå™¨æ‹–æ‹½äº‹ä»¶"></a>æµè§ˆå™¨æ‹–æ‹½äº‹ä»¶</h3><p>é¦–å…ˆï¼Œæ”¾<code>DragEVent</code>çš„<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/DragEvent" target="_blank" rel="external">MDNæ–‡æ¡£</a>ï¼Œé‡ç‚¹æ˜¯ä¸‹é¢å››ä¸ªäº‹ä»¶åŠè§£é‡Šï¼š</p>
<blockquote>
<ul>
<li><code>dragenter</code><br> å½“æ‹–åŠ¨çš„å…ƒç´ æˆ–é€‰æ‹©æ–‡æœ¬è¾“å…¥æœ‰æ•ˆçš„æ”¾ç½®ç›®æ ‡æ—¶ï¼Œä¼šè§¦å‘æ­¤äº‹ä»¶ã€‚</li>
<li><code>dragleave</code><br> å½“æ‹–åŠ¨çš„å…ƒç´ æˆ–æ–‡æœ¬é€‰æ‹©ç¦»å¼€æœ‰æ•ˆçš„æ”¾ç½®ç›®æ ‡æ—¶ï¼Œä¼šè§¦å‘æ­¤äº‹ä»¶ã€‚</li>
<li><code>dragover</code><br> å½“å°†å…ƒç´ æˆ–æ–‡æœ¬é€‰æ‹©æ‹–åŠ¨åˆ°æœ‰æ•ˆæ”¾ç½®ç›®æ ‡ï¼ˆæ¯å‡ ç™¾æ¯«ç§’ï¼‰ä¸Šæ—¶ï¼Œä¼šè§¦å‘æ­¤äº‹ä»¶ã€‚</li>
<li><code>drop</code><br> å½“åœ¨æœ‰æ•ˆæ”¾ç½®ç›®æ ‡ä¸Šæ”¾ç½®å…ƒç´ æˆ–é€‰æ‹©æ–‡æœ¬æ—¶è§¦å‘æ­¤äº‹ä»¶ã€‚</li>
</ul>
<hr>
<p>ä»¥åŠdataTransferå¯¹è±¡ï¼šåœ¨æ‹–æ”¾äº¤äº’æœŸé—´ä¼ è¾“çš„æ•°æ®ã€‚<br>è·å–æ–¹æ³•ï¼š <code>event.dataTransfer</code></p>
</blockquote>
<p>ä¸ºä»€ä¹ˆè¦å…³æ³¨ç€å‡ ä¸ªå‘¢ï¼Ÿå› ä¸º<strong>æµè§ˆå™¨æ˜¯è‡ªèº«ç›‘å¬è¿™å‡ ä¸ªæ‹–æ”¾äº‹ä»¶çš„</strong>ï¼ï¼è­¬å¦‚ä½ æŠŠå›¾ç‰‡æˆ–è€…pdfæ‹–è¿›æµè§ˆå™¨é‡Œã€‚æµè§ˆå™¨æ˜¯ä¼šè¯•å›¾æ‰“å¼€è¿™ä¸ªæ–‡ä»¶çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å¹²æ‰é»˜è®¤è¡Œä¸ºï¼Œå¾ˆç®€å•<code>e.preventDefault()</code>ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line">methods: &#123;</div><div class="line">    preventDefaultEvent (eventName) &#123;</div><div class="line">        document.addEventListener(eventName, function (e) &#123;</div><div class="line">            e.preventDefault();</div><div class="line">        &#125;, false)</div><div class="line">    &#125;,</div><div class="line">&#125;,</div><div class="line">mounted () &#123;</div><div class="line">    // é˜»æ­¢æµè§ˆå™¨é»˜è®¤çš„æ‹–æ‹½æ—¶äº‹ä»¶ï¼Œæµ‹è¯•é˜»æ­¢è¿™å‡ ä¸ªå°±å¤Ÿäº†ï¼Œä¸æ”¾å¿ƒå°±å…¨é˜»æ­¢ä¸€éå§</div><div class="line">    ['dragleave', 'drop', 'dragenter', 'dragover'].forEach(e =&gt; &#123;</div><div class="line">        this.preventDefaultEvent(e);</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line">...</div></pre></td></tr></table></figure>
<p>åšå®Œè¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬åªéœ€ç›‘å¬ç›®æ ‡ä¸Šçš„<code>drop</code>äº‹ä»¶å°±è¡Œäº†ï¼Œç¨å¾®æ”¹é€ ä¸‹ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">"box"</span>&gt;</span></div><div class="line">      ...</div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    ...</div><div class="line">    addDropSupport () &#123;</div><div class="line">        <span class="keyword">let</span> BOX = <span class="keyword">this</span>.$refs.box;</div><div class="line">        BOX.addEventListener(<span class="string">'drop'</span>, (e) =&gt; &#123;</div><div class="line">            e.preventDefault();</div><div class="line">            <span class="keyword">this</span>.errText = <span class="string">''</span>;</div><div class="line">            <span class="comment">// ä¸Šé¢ç»™çš„MDNæ–‡æ¡£é‡Œæœ‰è®²åˆ°dataTransferæ‰¿è½½æ‹–æ‹½æ•°æ®</span></div><div class="line">            <span class="keyword">let</span> fileList = e.dataTransfer.files; <span class="comment">// å…¶å®è¿™å°±æ˜¯æ–‡ä»¶å¯¹è±¡åˆ—è¡¨äº†</span></div><div class="line">            <span class="comment">// æ€»å¾—æ‹–ä¸€ä¸ªæ–‡ä»¶å§</span></div><div class="line">            <span class="keyword">if</span> (fileList.length === <span class="number">0</span>) &#123;</div><div class="line">                <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">            &#125;</div><div class="line">            <span class="comment">// æ ¼å¼é™åˆ¶</span></div><div class="line">            <span class="keyword">if</span> (fileList[<span class="number">0</span>].type.indexOf(<span class="string">'image'</span>) === <span class="number">-1</span>) &#123;</div><div class="line">                <span class="keyword">this</span>.errText = <span class="string">'è¯·é€‰æ‹©å›¾ç‰‡æ–‡ä»¶'</span>;</div><div class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="comment">// è¿™æ¬¡é™åˆ¶ä¸‹åªèƒ½æ‹–ä¸€ä¸ªæ–‡ä»¶</span></div><div class="line">            <span class="keyword">if</span> (fileList.length &gt; <span class="number">1</span>) &#123;</div><div class="line">                <span class="keyword">this</span>.errText = <span class="string">'æš‚ä¸æ”¯æŒå¤šæ–‡ä»¶'</span>;</div><div class="line">                <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">            &#125;</div><div class="line">            <span class="keyword">this</span>.handleFileChange(<span class="literal">null</span>, fileList[<span class="number">0</span>]);</div><div class="line">        &#125;)</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">// åŠ å…¥ç¬¬äºŒä¸ªå‚æ•°</span></div><div class="line">    handleFileChange (e, FILE) &#123; </div><div class="line">        <span class="comment">// æ•°æ®èµ‹å€¼æ”¹åŠ¨ï¼Œè¿™æ ·å°±å…¼å®¹ä¸¤ç§é€‰æ‹©æ–¹å¼äº†</span></div><div class="line">        <span class="keyword">this</span>.file = FILE || inputDOM.files[<span class="number">0</span>];</div><div class="line">    &#125;</div><div class="line">    ...</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>å…¶å®åˆ°è¿™é‡Œé‡è¦çš„ç‚¹éƒ½è®²äº†ï¼Œæ¥ä¸‹æ¥è¯´äº›å…¶ä»–çš„</p>
<h2 id="ä¸Šä¼ "><a href="#ä¸Šä¼ " class="headerlink" title="ä¸Šä¼ "></a>ä¸Šä¼ </h2><ul>
<li><code>uploader</code>çš„è¯é€‰æ‹©å®Œå›¾ç‰‡åœ¨<code>handleFileChange</code>é‡Œç›´æ¥æ‰§è¡Œä¸ªè¯·æ±‚ä¸Šä¼ </li>
<li>åœ¨çˆ¶ç»„ä»¶é‡Œè·å–å€¼è¯¥æ€ä¹ˆä¼ æ€ä¹ˆä¼ </li>
</ul>
<h2 id="å…¶ä»–ä¸€äº›ä¸œè¥¿"><a href="#å…¶ä»–ä¸€äº›ä¸œè¥¿" class="headerlink" title="å…¶ä»–ä¸€äº›ä¸œè¥¿"></a>å…¶ä»–ä¸€äº›ä¸œè¥¿</h2><ul>
<li>å½“é¡µé¢ä¸­éœ€è¦å¤šä¸ª<code>inputer</code>æ—¶ï¼ŒåŒä¸€ä¸ªinputçš„idä¼šå†²çªï¼Œæ‰€ä»¥ä¸æŒ‡å®šçš„æƒ…å†µä¸‹éœ€è¦ä¸ªå”¯ä¸€idï¼š</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></div><div class="line">    ...</div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">:id</span>=<span class="string">"inputId"</span> <span class="attr">...</span> /&gt;</span></div><div class="line">    ...</div><div class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">...</div><div class="line">methods: &#123;</div><div class="line">    gengerateID () &#123;</div><div class="line">        <span class="keyword">let</span> nonstr = <span class="built_in">Math</span>.random().toString(<span class="number">36</span>).substring(<span class="number">3</span>, <span class="number">8</span>);</div><div class="line">        <span class="keyword">if</span> (!<span class="built_in">document</span>.getElementById(nonstr)) &#123;</div><div class="line">            <span class="keyword">return</span> nonstr</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.gengerateID()</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">&#125;,</div><div class="line">mounted () &#123;</div><div class="line">    <span class="keyword">this</span>.inputId = <span class="keyword">this</span>.id || <span class="keyword">this</span>.gengerateID();</div><div class="line">&#125;    </div><div class="line">...</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<ul>
<li>inputåŸæœ¬å¯ä»¥æŒ‡å®šæ¥æ”¶çš„æ–‡ä»¶æ ¼å¼ï¼Œä¼šåœ¨é€‰æ‹©æ¡†å‡ºæ¥çš„æ—¶å€™é»˜è®¤æ— æ³•é€‰æ‹©éæŒ‡å®šæ ¼å¼çš„æ–‡ä»¶</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- acceptå±æ€§--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">accept</span>=<span class="string">"image/*,video/*;"</span> <span class="attr">...</span>/&gt;</span></div></pre></td></tr></table></figure>
<ul>
<li>ç§»åŠ¨ç«¯å…è®¸æ‹ç…§é€‰æ‹©<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- captureå±æ€§--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">capture</span>=<span class="string">"video"</span> <span class="attr">...</span>/&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><ul>
<li>æš‚æ—¶å°±è¿™ä¹ˆå¤šäº†ï¼Œå®Œæ•´çš„<a href="https://github.com/waynecz/vue-img-inputer/blob/master/src/component/imgInputer.vue" target="_blank" rel="external">æºç åœ¨è¿™é‡Œ</a></li>
<li>æœ‰ä»»ä½•è®²çš„ä¸å¯¹ä¸å¥½çš„åœ°æ–¹è¯·å¤§åŠ›æŒ‡æ­£ï¼</li>
<li>æ¬¢è¿starğŸ˜</li>
</ul>

      
    </div>
  
    <footer class="article-footer">
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HTML/">HTML</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>

    </footer>
  
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2016/05/16/é¡µé¢å…ƒç´ è°ä¸Šè°ä¸‹çš„ä½“ä½æ€»ç»“/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">é¡µé¢å…ƒç´ è°ä¸Šè°ä¸‹çš„ä½“ä½æ€»ç»“&nbsp;<span>&gt;</span></div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
  <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'waynecz';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>
</section>
    <footer id="footer">
  
  <div class="outer">
  	<p style="padding-bottom: 30px">å‹æƒ…ä¼ é€é—¨â€”â€”å…¨æ ˆçš„å®‰å…¨å°å¼Ÿï¼š<a style="color:#ff3f3f" target="_blank" href="http://gnaixx.cc/">å‡¸ä¸€_ä¸€å‡¸</a></p>
    <div id="footer-info" class="inner">
      &copy; 2017 Wayne&nbsp;
      by <a href="http://hexo.io/" target="_blank">Hexo</a>, theme by <a href="http://github.com/waynecz">waynecz</a> modify with <a href="http://github.com/ppoffice">PPOffice</a>
    </div>
  </div>
</footer>
    
<script>
  var disqus_shortname = 'waynecz';
  
  var disqus_url = 'http://waynecz.github.io/2017/02/27/ä»0å¼€å§‹åšä¸€ä¸ªçš„Vueå›¾ç‰‡-æ–‡ä»¶é€‰æ‹©-ä¸Šä¼ -ç»„ä»¶-åŸºç¡€å‘/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="/js/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
  </div>
</body>
</html>